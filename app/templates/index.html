<!DOCTYPE html>
<html>
<head>
    <title>ToDo App</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <h1>ToDo App</h1>
    <form method="POST" action="/add">
        <input type="text" name="task" placeholder="Enter a task">
        <button type="submit">Add Task</button>
    </form>
    {% with messages = get_flashed_messages() %}
        {% if messages %}
            <ul>
                {% for message in messages %}
                    <li style="color: red;">{{ message }}</li>
                {% endfor %}
            </ul>
        {% endif %}
    {% endwith %}
    <h2>Tasks:</h2>
    <ul>
        {% for task in tasks %}
            <li>
                {% if task[0] == editing_task_id %}
                    <form method="POST" action="/edit/{{ task[0] }}">
                        <input type="text" name="task" value="{{ task[1] }}">
                        <button type="submit">Save</button>
                        <a href="/">Cancel</a>
                    </form>
                {% else %}
                    <span style="text-decoration: {% if task[2] %}line-through{% endif %};">
                        {{ task[1] }}
                    </span>
                    <form method="POST" action="/delete/{{ task[0] }}" style="display:inline;">
                        <button type="submit">Delete</button>
                    </form>
                    <a href="/edit/{{ task[0] }}" class="edit-button">Edit</a>
                    <form method="POST" action="/toggle/{{ task[0] }}" style="display:inline;">
                        <input type="checkbox" name="toggle" {% if task[2] %}checked{% endif %} onchange="this.form.submit()">
                    </form>
                {% endif %}
            </li>
        {% endfor %}
    </ul>
</body>
</html>
